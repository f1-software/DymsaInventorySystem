@page "/saletransaction"

<div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-header">
          <span class="card-title">Sale Transaction Form</span>
        </div>
        <div class="card-body">
          <div class="row">
			<div class="col-sm-4">
				<div class="form-group">
					<label for="">Transaction Date</label>
					<input type="date" class="form-control" id="transaction_date" @bind-value="CurrentSaleTransaction.TransactionDate">
				</div>
				<div class="form-group">
					<!-- <label for="">Item&nbsp;&nbsp;&nbsp;&nbsp;<span id="item_price_text">Price : <span id="item_price_value"></span></span></label> -->
					<label for="">Item</label>
					<select id="item_genre_id" class="form-control select2" @bind="@CurrentSaleTransaction.ItemId">
						<option value="0">[SELECT]</option>
						@foreach (var item in Items)
						{
							<option value="@item.ItemId">@item.ItemDescription</option>
						}
					</select>
				</div>
			</div>
			<div class="col-sm-4">
			    <div class="form-group">
					<label for="">Qty</label>
					<input type="number" class="form-control" id="qty" @bind-value="CurrentSaleTransaction.Qty">
				</div>
				@* <div class="form-group">
					<label for="">Cost</label>
					<input type="number" class="form-control number" id="price" @bind-value="CurrentSaleTransaction">
				</div> *@
			</div>
			<div class="col-sm-4">
				<div class="form-group">
					<label for="">Discount/Commission</label>
					<input type="number" class="form-control number" id="delivery_fee" @bind-value="CurrentSaleTransaction.DiscountOrCommission">
				</div>
				<div class="row">
				    @* <div class="col-sm-6">
				        <div class="form-group">
        					<label for="">Comment</label>
        					<input type="text" class="form-control number" id="delivery_fee" @bind-value="CurrentPurchaseTransaction.Comment">
        				</div>
				    </div> *@
				    <div class="col-sm-6">
				        <div class="form-group">
        					<label for="">&nbsp;</label>
        					<br>
        					<button @onclick="Save" class="btn btn-success btn-block" id="btnsave"><i class="fas fa-save"></i> Save</button>
        				</div>
				    </div>
				</div>
			</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-12 mt-3">
      <div class="card">
        <div class="card-header">
          <span class="card-title">List</span>
        </div>
        <div class="card-body" id="listarea" style="overflow-x: auto;overflow-y: auto; max-height:500px;">
            <table class="table table-bordered table-sm table-hover table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Item</th>
                        <th>Qty</th>
                        <th>Discount/Commission</th>
                        <th>Net</th>
                    </tr>
                </thead>
                <tbody>
                    @if (SaleTransactions.Any())
                    {
                        foreach (var p in SaleTransactions)
                        {
                            <tr>
                                <td>@p.TransactionDate.ToShortDateString()</td>
                                <td>
                                    @{
                                        var item = Items.FirstOrDefault(s=>s.ItemId == p.ItemId);
                                        <span>@item.ItemName - @item.ItemDescription</span>
                                    }
                                </td>
                                <td>@p.Qty</td>
                                <td>@p.DiscountOrCommission</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
      </div>
    </div>
  </div>